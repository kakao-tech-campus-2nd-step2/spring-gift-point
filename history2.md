# step2

1. step1에서 만든 것에 대해서 정상 동작을 하는 지 테스트를 만들자.

2. 카카오 로그인과 회원가입서비스

3. 관리자 페이지 완성

4. 주문하기 서비스

---

일단 주문하기 서비스에 대해서 테스트를 만들고 테스트를 기반으로 동작을 구현하도록 하겠다.

왜냐하면 너무 느려져서...

---

구조를 생각하다보면 점점 더 시간이 느려진다.
일단 막 구현을 하고 그다음 리펙토링을 생각해보자?

서비스에 인터페이스를 왜 쓰는가??

일단 처음 서비스는 구조 파악을 위해 막 구현하고, 그다음 리펙토링을 하고 싶은데 기존의 코드를 수정하기 시작하면
다음 일정 등에 의해서 작업이 마감되지 않는 경우 점점 꼬이게 되는 것 같다.

그래서 서비스를 인터페이스로 만들고 쉽게 스위칭할 수 있게 하고 싶다.

지금은 하나하나 기프트 옵션, 위시리스트 리포지토리를 전부 접근해서 써야하는데 이게 맞는 방법인지?

---

고수준 모듈, 저수준 모듈

고수준 모듈은 하나의 기능을 수행한다면, 저수준 모듈은 이 기능 수행을 위해서 구현된 것들

---

product에서 하나의 wish를 삭제한다면, cascade -> cascade delete 설정

굳이 cascade 기능을 사용하지 않을 이유는? -> cascade는 삭제를 할 때 연관된 것들을 삭제하는 기능이다.

---

각 서비스에서 자신의 repository와 연관된 facade? adapter? 를 가지고 있다면,
서비스는 jpa와 fk에 대한 연관관계를 책임 질 필요가 없이, model을 통해서 작업을 진행하고, 실제 데이터가 존재하지 않는 등의
문제는 전부 facade에서 처리하면 되는 것이다.

그렇게 된다면, 서비스는 비즈니스 로직만 신경쓰면 되니까 뭔가 복잡함이 사라지지않을까?

그럼 왜 이렇게 해야할까? 굳이? test를 작성한다고 생각을 해보자. orderService라고 생각을 해보면,

주문을 생성할 때 서비스 레이어에서 책임을 져야하는 것은? 

---

jpa에서 새로운 객체를 생성하는데, 그 안에 다른 entity로 되어있는 객체가 연관되어있는데, 그것도 새로 생기는 것인데,
이걸 cascade로 안해두면, null이 된다. 참고.

나는 직접 cascade를 다루기로 하였으므로. 주의해야함
