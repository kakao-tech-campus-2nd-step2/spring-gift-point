# 카카오톡 선물하기

# 목차

### [1. 기능 목록](#week-1)

* [Week 1](#week-1)

* [Week 2](#week-2)

* [Week 3](#week-3)

* [Week 4](#week-4)

* [Week 5](#week-5)

# Week 1

## Step 1

* 상품 전체 조회 API

* 상품 추가 API

* 상품 수정 API

* 상품 삭제 API

## Step 2

API 호출은 axios 라이브러리 사용

* 상품 단건 조회 API

* 상품 전체 조회 View

    * 상품 전체 조회 API 호출

* 상품 추가 View

    * 상품 추가 Form

    * 상품 추가 API 호출

* 상품 수정 View

    * 상품 수정 Form

        * 기존에 등록된 상품 정보를 가져오기 위한 상품 단건 조회 API 호출

    * 상품 수정(PUT) API 호출

* 상품 삭제 View

    * 상품 삭제 API 호출

## Step 3

* 상품 데이터를 Map이 아닌 H2 database에서 CRUD 작업이 이루어지게끔 리팩토링

# Week 2

## Step 1

* 상품 추가 또는 수정 시 상품 정보 유효성 검사

    * 상품 이름은 공백을 포함하여 최대 15자까지 입력할 수 있다.

    * 특수 문자 가능: ( ), [ ], +, -, &, /, _ (이 외 특수 문자 사용 불가)

    * "카카오"가 포함된 문구는 담당 MD와 협의한 경우에만 사용할 수 있다.

* 유효성 검사에 실패 했을 때의 예외 처리

* 존재하지 않는 상품에 관한 요청 시 예외 처리

## Step 2

* 사용자(MEMBER) 테이블 생성

* 사용자 회원가입 기능

* 사용자 로그인 기능

    * 사용자로부터 이메일과 비밀번호를 받아 해당 사용자가 DB에 저장되어 있는지 체크한다.

        * 성공 시 토큰을 발급하여 응답한다.

## Step 3

* 위시리스트 테이블 생성

* 토큰을 검사해 인증 처리

    * `@LoginMember` 어노테이션이 붙은 곳에서만 토큰 검사 로직 수행

    * 토큰 검사에 통과하지 못하면, 401 에러 반환

* 토큰 검증 성공 시 사용자별 기능

    * 위시 리스트에 등록된 상품 목록을 조회할 수 있다.

    * 위시 리스트에 상품을 추가할 수 있다.

    * 위시 리스트에 담긴 상품을 삭제할 수 있다.

# Week 3

## Step 1

* JdbcTemplate 기반 코드를 Spring Data JPA 기반 코드로 리팩토링

* `@DataJpaTest` 을 사용하여 테스트

## Step 2

* 위시리스트와 회원, 상품에 연관관계 매핑

## Step 3

* 상품 전체 조회에 페이징 적용

* 위시리스트에 존재하는 상품 조회에 페이징 적용

* 위시리스트 테스트 코드 작성

# Week 4

## Step 1

* 카테고리 모델 설계 및 상품과 카테고리 연관관계 매핑

* 카테고리 조회 API 구현

* 카테고리 추가 API 구현

* 카테고리 수정 API 구현

* 상품 API 요청 시 카테고리 필드 추가

* 테스트 코드 작성

## Step 2

* 옵션 엔티티 클래스 설계 및 상품과 연관관계 매핑

* 옵션 조회 API

* 옵션 추가 API

    * 하나의 상품에서 중복 옵션 예외처리

* 상품 추가 시 옵션도 반드시 하나 이상 추가할 수 있도록 수정

* 옵션 삭제 API

* 테스트 코드 작성

## Step 3

* 상품 옵션의 수량을 지정된 숫자만큼 빼는 기능

    * 옵션의 수량은 1보다 작을 수 없음

## Step 4

* Step 3에서 구현한 옵션 수량 차감 메서드 동시성 문제 해결

* 동시성 테스트

# Week 5

## Step 1

* 카카오톡 로그인 화면으로 Redirect 및 코드 발급 기능 구현

* 코드 발급 후 redirect 된 곳에서 AccessToken 발급 기능 구현

* 토큰 발급 시 발생할 수 있는 예외 핸들링

* 테스트 코드 작성

## Step 2

* 엑세스 토큰 및 리프레시 토큰 DB에 저장

* 엑세스 토큰 만료 시 리프레시 토큰으로 재발급 기능 구현

* Order 엔티티 설계

* 주문하기 기능 구현

    * 옵션ID와 수량, 메시지를 받아 해당 수량만큼 차감하고 카카오톡 나에게 보내기를 통해 주문 결과 메시지 전송

    * 만약 위시리스트에 존재하던 상품이라면, 위시리스트에서 제거

    * 카카오 유저와 일반 유저가 주문하는 것 각기 다르게 처리

* 테스트 코드 작성

## Step 3

* Swagger로 API 문서화
