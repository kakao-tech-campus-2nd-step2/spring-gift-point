<!DOCTYPE html>
<html lang="en">
<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
<div class="container p-3 my-3 bg-dark text-white">
    <h1>ë¡œê·¸ì¸ê³¼ íšŒì›ê°€ì… í™”ë©´</h1>
    <p>í™˜ì˜í•©ë‹ˆë‹¤!ğŸ–ï¸ğŸ–ï¸</p>
</div>
<br><br>
<div class="container">
    <div class="container">
        <h2>íšŒì›ê°€ì…</h2>
    </div>
    <div class="container">
        <div class="form-inline" id="joinInPut">
            <input class="form-control" id="joinName" placeholder="ì´ë¦„" required type="text">
            <input class="form-control" id="joinEmail" placeholder="ì´ë©”ì¼" required type="text">
            <input class="form-control" id="joinPassword" placeholder="ë¹„ë°€ë²ˆí˜¸" required type="text">
            ê´€ë¦¬ìì¸ê°€ìš”?<input class="form-check-input" id="role" type="checkbox">
            <button class="btn btn-primary btn-sm" id="joinButton">íšŒì›ê°€ì…</button>
        </div>
    </div>
</div>


<div class="container">
    <div class="container">
        <h2>ë¡œê·¸ì¸</h2>
    </div>
    <div class="container">
        <div class="form-inline" id="loginInPut">
            <input class="form-control" id="email" placeholder="ì´ë©”ì¼" required type="text">
            <input class="form-control" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸" required type="text">
            <button class="btn btn-primary btn-sm" id="loginButton">ë¡œê·¸ì¸</button>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        // íšŒì›ê°€ì…
        $('#joinButton').on('click', function (e) {
            e.preventDefault();
            var productData = {
                name: $('#joinName').val(),
                email: $('#joinEmail').val(),
                password: $('#joinPassword').val(),
                role: $('#role').is(':checked') ? 'ADMIN' : 'USER'
            };
            $.ajax({
                type: 'POST',
                url: '/spring-gift/members/join',
                contentType: 'application/json',
                data: JSON.stringify(productData),
                success: function (response) {
                    if (response.redirectUrl) {
                        window.location.href = response.redirectUrl;
                    }
                },
                error: function (xhr, status, error) {
                    var errorResponse = JSON.parse(xhr.responseText);
                    alert(errorResponse.errorMessage);
                }
            });
        });

        // ë¡œê·¸ì¸
        $('#loginButton').on('click', function (e) {
            e.preventDefault();
            var loginData = {
                email: $('#email').val(),
                password: $('#password').val()
            };
            $.ajax({
                type: 'POST',
                url: '/spring-gift/members/login',
                contentType: 'application/json',
                data: JSON.stringify(loginData),
                success: function (response) {
                    if (response.redirectUrl) {
                        window.location.href = response.redirectUrl;
                    }
                },
                error: function (xhr, status, error) {
                    var errorResponse = JSON.parse(xhr.responseText);
                    alert(errorResponse.errorMessage);
                }
            });
        });
    });
</script>
</script>
</body>
</html>